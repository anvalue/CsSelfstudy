[toc]

# 数码管显示

## 动态显示

> |            | 无小数点                                                     | 有小数点                                                     |
> | ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
> | 共阳数码管 | 0xc0,0xf9,0xa4,0xb0,0x99, 0x92,0x82,0xf8,0x80,0x90, 0x88,0x83,0xc6,0xa1,0x86,0x8e,0xbf | 0x40,0x79,0x24,0x30, 0x19,0x12,0x02,0x78, 0x00,0x10,0x08,0x03,0x46,0x21,0x06,0x0e,0x3f |
> | 共阴数码管 | 0x3f,0x06,0x5b,0x4f,0x66, 0x6d,0x7d,0x07,0x7f,0x6f, 0x77,0x7c,0x39,0x5e,0x79,0x71 | 0xbf,0x86,0xdb,0xcf,0xe6, 0xed,0xfd,0x87,0xff,0x6f, 0xf7,0xfc,0xb9,0xde,0xf9,0xf1 |
>
> - 共阳：无小数前四位 ==-8== 有小数点
> - 共阴：无小数点前四位==+8==有小数点
>
> ==共阳数码管（无小数）==：`unsigned char code smg[]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90, 0x88,0x83,0xc6,0xa1,0x86,0x8e,0xbf};`
>
> ==共阴数码管（无小数）==：`unsigned char code smg[]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f, 0x77,0x7c,0x39,0x5e,0x79,0x71};`
>
> ==共阳数码管（有小数）==：`unsigned char code smg[] = {0x40,0x79,0x24,0x30,0x19,0x12,0x02,0x78 ,0x00,0x10,0x08,0x03,0x46,0x21,0x06,0x0e,0x3f};`
>
> ==共阴数码管（有小数）==：`unsigned char code smg[] = {0xbf,0x86,0xdb,0xcf,0xe6 0xed,0xfd,0x87,0xff,0x6f,0xf7,0xfc,0xb9,0xde,0xf9,0xf1};`

```c
sbit DU = P2^6;						//数码管段选
sbit WE = P2^7;						//数码管段选

// 共阴极数码管
uchar code SMGNoDot[]={0x3f,0x06,0x5b,0x4f,0x66, 0x6d,0x7d,0x07,0x7f,0x6f, 0x77,0x7c,0x39,0x5e,0x79,0x71};
uchar code SMGDot[]={0xbf,0x86,0xdb,0xcf,0xe6, 0xed,0xfd,0x87,0xff,0x6f, 0xf7,0xfc,0xb9,0xde,0xf9,0xf1}; 
// 数码管位码
uchar code T_COM[]={0xfe, 0xfd, 0xfb, 0xf7, 0xef, 0xdf, 0xbf, 0x7f};

void Display(uint Value)			//注意由于需要显示的数大于一个字节所有形参需为int型
{	
//------------------------------
	DU = 0;								//关闭段选
	P0 = SMGNoDot[Value/100];		     //数码管显示百位
	DU = 1;							   //打开段选
	DU = 0;							   //关闭段选

	WE = 0;						      //关闭位选
	P0 = T_COM[0];				       //第一位数码管
	WE = 1;						      //打开位选
	WE = 0;						      //关闭位选
	Delay_Ms(2);
//-------------------------------
	DU = 0;
	P0 = SMGDot[Value%100/10]|0x80;      //显示十位
	DU = 1;
	DU = 0;

	WE = 0;
	P0 = T_COM[1];			          //第二位数码管
	WE = 1;
	WE = 0;
	Delay_Ms(2);
//-------------------------------
	DU = 0;
	P0 = SMGNoDot[Value%10];		    //显示个位
	DU = 1;
	DU = 0;

	WE = 0;
	P0 = T_COM[2];				      //第三位数码管
	WE = 1;
	WE = 0;
	Delay_Ms(2);
}
```

